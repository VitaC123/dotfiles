#!/usr/bin/env bash
#
# Run from the root of a Git repo to symlink the provided hook as
# .git/hooks/pre-commit

HOOK=$1

if [ -z $HOOK ]; then
    echo "Hook file required"
    exit 1
fi

source=$DOTFILES/git/hooks/pre-commit/$HOOK

if [ ! -f $source ]; then
    echo "Hook $HOOK not found"
    exit 1
fi

if [ ! -d .git ]; then
    echo "Must be at root of git repo"
    exit 1
fi

target=$PWD/.git/hooks/pre-commit

if [ -f $target ]; then
    echo "pre-commit hook already exists"
    exit 1
fi

ln -s $source $target

echo "Linked $source to $target"
